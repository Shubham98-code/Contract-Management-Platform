<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
        }
        /* Soft animated gradient background */
        .bg-animated {
            background: linear-gradient(-45deg, #f1f5f9, #e0f2fe, #f3e8ff, #f8fafc);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="text-slate-800 bg-animated min-h-screen selection:bg-purple-200 selection:text-purple-900">

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        
        <div class="mb-10 animate-fade-in">
            <h1 class="text-6xl font-extrabold mb-3 tracking-tight">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 drop-shadow-sm">
                    Contract Dashboard
                </span>
            </h1>
            <p class="text-slate-500 text-xl font-medium">Manage, track, and secure your contracts in one place.</p>
        </div>

        <div class="flex gap-4 mb-10 animate-fade-in delay-100">
            <a href="blueprint-create.html" class="group relative px-6 py-3 rounded-xl font-bold text-white shadow-lg shadow-blue-500/30 transition-all duration-300 hover:scale-105 hover:shadow-blue-500/50 active:scale-95 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 transition-all duration-300 group-hover:scale-110"></div>
                <div class="relative flex items-center gap-2">
                    <span class="text-xl">‚ú®</span> New Blueprint
                </div>
            </a>
            
            <a href="contract-create.html" class="group relative px-6 py-3 rounded-xl font-bold text-white shadow-lg shadow-emerald-500/30 transition-all duration-300 hover:scale-105 hover:shadow-emerald-500/50 active:scale-95 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-600 transition-all duration-300 group-hover:scale-110"></div>
                <div class="relative flex items-center gap-2">
                    <span class="text-xl">üìÑ</span> New Contract
                </div>
            </a>
        </div>

        <div class="bg-white/80 backdrop-blur-md p-5 rounded-2xl shadow-sm border border-white/50 mb-10 animate-fade-in delay-200">
            <div class="flex items-center gap-2 text-indigo-600 font-bold mb-4 px-1">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>
                <span>Filter by Status</span>
            </div>
            <div class="flex flex-wrap gap-3" id="filter-container">
                </div>
        </div>

        <div class="animate-fade-in delay-300 pr-14">
            <div class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl px-6 py-4 grid grid-cols-12 gap-4 text-slate-300 font-bold text-sm uppercase tracking-wider mb-4 shadow-xl shadow-slate-200" id="nav">
                <div class="col-span-3 text-white">Contract Name</div>
                <div class="col-span-3">Blueprint</div>
                <div class="col-span-2 text-center">Status</div>
                <div class="col-span-2">Created Date</div>
                <div class="col-span-2 text-right">Actions</div>
            </div>
        </div>

        <div id="contract-list" class="space-y-4 pb-12">
            </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12 animate-fade-in delay-400">
            
            <div class="group relative overflow-hidden rounded-2xl p-6 h-40 flex flex-col justify-between transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-blue-500/20">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-500 to-indigo-600"></div>
                <div class="absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"></div>
                
                <div class="relative z-10 text-white">
                    <p class="font-medium opacity-90 text-blue-100">Created</p>
                    <h3 class="text-5xl font-bold mt-1 tracking-tight" id="stat-created">0</h3>
                </div>
                <div class="relative z-10 w-full bg-black/20 h-1.5 rounded-full mt-2 overflow-hidden">
                    <div class="bg-white/90 w-2/3 h-1.5 rounded-full transition-all duration-1000 group-hover:w-full"></div>
                </div>
            </div>

            <div class="group relative overflow-hidden rounded-2xl p-6 h-40 flex flex-col justify-between transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-emerald-500/20">
                <div class="absolute inset-0 bg-gradient-to-br from-emerald-500 to-teal-600"></div>
                <div class="absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"></div>
                
                <div class="relative z-10 text-white">
                    <p class="font-medium opacity-90 text-emerald-100">Approved</p>
                    <h3 class="text-5xl font-bold mt-1 tracking-tight" id="stat-approved">0</h3>
                </div>
                <div class="relative z-10 w-full bg-black/20 h-1.5 rounded-full mt-2 overflow-hidden">
                    <div class="bg-white/90 w-2/3 h-1.5 rounded-full transition-all duration-1000 group-hover:w-full"></div>
                </div>
            </div>

            <div class="group relative overflow-hidden rounded-2xl p-6 h-40 flex flex-col justify-between transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-purple-500/20">
                <div class="absolute inset-0 bg-gradient-to-br from-purple-500 to-fuchsia-600"></div>
                <div class="absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"></div>
                
                <div class="relative z-10 text-white">
                    <p class="font-medium opacity-90 text-purple-100">Signed</p>
                    <h3 class="text-5xl font-bold mt-1 tracking-tight" id="stat-signed">0</h3>
                </div>
                <div class="relative z-10 w-full bg-black/20 h-1.5 rounded-full mt-2 overflow-hidden">
                    <div class="bg-white/90 w-2/3 h-1.5 rounded-full transition-all duration-1000 group-hover:w-full"></div>
                </div>
            </div>

             <div class="group relative overflow-hidden rounded-2xl p-6 h-40 flex flex-col justify-between transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-slate-500/20">
                <div class="absolute inset-0 bg-gradient-to-br from-slate-700 to-slate-800"></div>
                <div class="absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"></div>
                
                <div class="relative z-10 text-white">
                    <p class="font-medium opacity-90 text-slate-300">Locked</p>
                    <h3 class="text-5xl font-bold mt-1 tracking-tight" id="stat-locked">0</h3>
                </div>
                <div class="relative z-10 w-full bg-black/20 h-1.5 rounded-full mt-2 overflow-hidden">
                    <div class="bg-white/90 w-2/3 h-1.5 rounded-full transition-all duration-1000 group-hover:w-full"></div>
                </div>
            </div>

        </div>
    </div>

    <script src="script.js"></script>
    <script>
        /* Dashboard Logic */
        const allContracts = DB.get("contracts");
        
        const statuses = ["All Contracts", "Created", "Approved", "Sent", "Signed", "Locked", "Revoked"];
        let currentFilter = "All Contracts";

        function renderFilters() {
            const container = document.getElementById("filter-container");
            container.innerHTML = statuses.map(status => {
                const isActive = status === currentFilter;
                
                const activeClass = "bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30 ring-2 ring-indigo-600 ring-offset-2 scale-105";
                const inactiveClass = "bg-white text-slate-600 border border-slate-200 hover:border-indigo-300 hover:text-indigo-600 hover:shadow-md hover:-translate-y-0.5";
                
                const icon = (status === "All Contracts" && isActive) ? 'üìã ' : '';

                return `<button onclick="setFilter('${status}')" 
                        class="px-5 py-2.5 rounded-full font-bold text-sm transition-all duration-300 ${isActive ? activeClass : inactiveClass}">
                        ${icon}${status}
                    </button>`;
            }).join("");
        }

        function setFilter(status) {
            currentFilter = status;
            renderFilters();
            renderDashboardTable();
        }

        function renderDashboardTable() {
            const list = document.getElementById('contract-list');
            let filtered = allContracts;
            if(currentFilter !== "All Contracts") filtered = allContracts.filter(c => c.status === currentFilter);

            if(filtered.length === 0) {
                list.innerHTML = `
                    <div class="flex flex-col items-center justify-center p-16 text-center animate-fade-in bg-white/50 rounded-3xl border border-dashed border-slate-300">
                        <div class="text-6xl mb-4 opacity-50">üì≠</div>
                        <h3 class="text-xl font-bold text-slate-600">No contracts found</h3>
                        <p class="text-slate-400">Try changing the filter or create a new contract.</p>
                    </div>`;
                return;
            }

            list.innerHTML = filtered.map((c, index) => `
                <div class="group flex items-center gap-4 animate-fade-in" style="animation-delay: ${index * 50}ms">
                    
                    <div class="flex-1 bg-white/90 backdrop-blur px-6 py-5 grid grid-cols-12 gap-4 items-center rounded-2xl border border-slate-100 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-indigo-100 hover:border-indigo-200 hover:-translate-y-1 relative overflow-hidden">
                        
                        <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity"></div>

                        <div class="col-span-3 font-bold text-slate-800 truncate flex items-center gap-3">
                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-lg shadow-inner">üìù</div>
                            <span>${c.clientName || 'Contract #' + c.id}</span>
                        </div>
                        <div class="col-span-3 text-slate-500 font-medium truncate text-sm flex items-center gap-2">
                            <span class="w-1.5 h-1.5 rounded-full bg-slate-300"></span>
                            ${c.blueprintName}
                        </div>
                        <div class="col-span-2 text-center scale-95 group-hover:scale-100 transition-transform">${getStatusBadge(c.status)}</div>
                        <div class="col-span-2 text-slate-400 text-sm font-semibold">${c.createdDate}</div>
                        
                        <div class="col-span-2 text-right flex justify-end gap-2 opacity-90 group-hover:opacity-100 transition-opacity">
                            
                            <a href="contract-view.html?id=${c.id}" class="hover:scale-105 active:scale-95 bg-white border border-slate-200 text-slate-600 hover:border-blue-400 hover:text-blue-600 px-3 py-2 rounded-lg text-sm font-bold flex items-center shadow-sm transition-all" title="View Details">
                                üëÅÔ∏è <span class="ml-1 hidden xl:inline">View</span>
                            </a>
                            
                            ${c.status !== 'Locked' && c.status !== 'Revoked' ? `
                            <a href="contract-update.html?id=${c.id}" class="hover:scale-105 active:scale-95 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white px-3 py-2 rounded-lg text-sm font-bold flex items-center shadow-md shadow-emerald-500/20 transition-all" title="Update Status & Data">
                                ‚ö° <span class="ml-1 hidden xl:inline">Update</span>
                            </a>` : ''}
                        </div>
                    </div>

                    <button onclick="deleteContract(${c.id})" class="w-12 h-12 flex-shrink-0 bg-white text-slate-300 hover:text-white hover:bg-gradient-to-br hover:from-red-500 hover:to-red-600 rounded-2xl border border-slate-200 shadow-sm hover:shadow-lg hover:shadow-red-500/30 flex items-center justify-center transition-all duration-300 opacity-0 group-hover:opacity-100 transform" title="Delete Contract">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                    </button>

                </div>
            `).join('');
        }

        function getStatusBadge(status) {
            let colors = {
                'Created': 'bg-blue-50 text-blue-700 border-blue-200 ring-blue-500/20',
                'Approved': 'bg-emerald-50 text-emerald-700 border-emerald-200 ring-emerald-500/20',
                'Sent': 'bg-indigo-50 text-indigo-700 border-indigo-200 ring-indigo-500/20',
                'Signed': 'bg-purple-50 text-purple-700 border-purple-200 ring-purple-500/20',
                'Locked': 'bg-slate-100 text-slate-600 border-slate-300 ring-slate-500/20',
                'Revoked': 'bg-red-50 text-red-700 border-red-200 ring-red-500/20'
            };
            return `<span class="${colors[status] || 'bg-gray-50'} border px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider inline-flex items-center gap-1.5 shadow-sm ring-1 ring-inset">
                <span class="w-1.5 h-1.5 rounded-full bg-current"></span> ${status}
            </span>`;
        }

        function deleteContract(id) {
            if(confirm("Are you sure you want to delete this contract?")) {
                let contracts = DB.get("contracts");
                contracts = contracts.filter(c => c.id != id);
                DB.set("contracts", contracts);
                window.location.reload();
            }
        }

        // Stats Logic
        document.getElementById('stat-created').innerText = allContracts.filter(c => c.status === 'Created').length;
        document.getElementById('stat-approved').innerText = allContracts.filter(c => c.status === 'Approved').length;
        document.getElementById('stat-signed').innerText = allContracts.filter(c => c.status === 'Signed').length;
        document.getElementById('stat-locked').innerText = allContracts.filter(c => c.status === 'Locked').length;

        // Init
        renderFilters();
        renderDashboardTable();
    </script>
</body>
</html>
